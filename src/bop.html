<!doctype html>
<html lang="en-US">
  <head>
    <%= t.include("partials/_head.html", grunt.data.json) %>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div >
    </div>

    <main class="app constrained">
     <div style="border: 1px solid #333; margin-bottom: 10px; padding: 20px;">
        <div id="bop-wrapper">
          </div>    
        </div>

        
    </main>
    <script>
        window.PROJECT_ANALYTICS = <%= JSON.stringify(json.project.analytics || {}) %>;
    </script>
    <script>
        function buildComponents() {
          const params = new URLSearchParams(window.location.search);
          const races = params.get('races')?.split(',') || ['president']; // Default to senate if no races
          
          const components = races.map(race => {
            if (race === 'combined') {
              return `<div class="bop-wrapper">
                <balance-of-power-bar></balance-of-power-bar>
              </div>`;
            } else {
              return `<div class="bop-wrapper">
                <balance-of-power-combined race="${race}"></balance-of-power-combined>
              </div>`;
            }
          });

          const container = document.getElementById('bop-wrapper');
          if (container) {
            container.innerHTML = components.join('\n');
          }
        }
      
        // Run when page loads
        window.addEventListener('DOMContentLoaded', buildComponents);
      </script>
    <script src="app.js" async></script>
    <%= t.include("partials/_analytics.html") %>
  </body>
</html>
